# ddd-project (도메인 주도 개발 정리)

## 도메인 주도 설계(DDD)란?
도메인 주도 설계는 복잡한 비즈니스 도메인을 소프트웨어로 구현하는 접근 방식입니다. 핵심은 비즈니스 도메인을 중심으로 소프트웨어를 설계하고, 도메인 전문가와 개발자 간의 공통 언어(유비쿼터스 언어)를 통해 의사소통을 원활히 하는 것입니다.

## 프로젝트 구현 가이드
이 프로젝트는 헥사고날 아키텍처와 DDD 원칙을 결합하여 내부 도메인과 외부 의존성을 명확하게 분리했습니다. 새로운 기능을 개발할 때는 다음 순서로 접근하세요:

1. 도메인 전문가와 함께 도메인 모델 정의 (유비쿼터스 언어 사용)
2. 도메인 계층에 엔티티, 값 객체, 애그리게이트 구현
3. 필요한 도메인 서비스 및 이벤트 구현
4. 애플리케이션 계층의 명령 및 쿼리 핸들러 구현
5. 인프라스트럭처 계층의 리포지토리 및 외부 서비스 어댑터 구현
6. 인터페이스 계층의 컨트롤러 및 DTO 구현
7. 각 계층별 단위 테스트 작성

## 도메인 주도 개발과 이벤트 스토밍 프로세스

### 이벤트 스토밍과 DDD 개발 흐름
1. **이벤트 스토밍**
   - 도메인 전문가와 개발자가 함께 비즈니스 프로세스를 시각화
   - 도메인 이벤트, 명령, 애그리게이트, 외부 시스템 등을 식별
   - **핵심 목적**: 유비쿼터스 언어 형성 및 공유된 이해 구축

2. **바운디드 컨텍스트 식별**
   - 이벤트 스토밍을 통해 나온 결과물을 기반으로 논리적 경계 설정
   - 각 컨텍스트 내의 책임과 모델 범위 명확화
   - 컨텍스트 간 관계 및 통합 패턴 정의 (컨텍스트 맵)

3. **도메인 모델링**
   - 각 바운디드 컨텍스트별 세부 모델링 진행
   - 애그리게이트, 엔티티, 값 객체, 도메인 서비스 등 정의
   - 비즈니스 규칙과 제약 조건 명시

4. **기술적 구현 계획**
   - API 설계: 도메인 모델을 기반으로 한 API 구조 설계
   - DB 모델링: 도메인 모델을 적절히 영속화할 수 있는 데이터 구조 설계
   - UI 설계: 사용자 경험을 고려하되 도메인 개념을 적절히 반영

5. **코드 구현**
   - 도메인 계층 먼저 구현 (도메인 모델, 비즈니스 규칙)
   - 응용 계층, 인프라 계층, 인터페이스 계층 순차적 구현
   - 모델과 코드 간 일관성 유지

### DDD의 차별점

DDD가 다른 개발 방법론과 구별되는 핵심 포인트는:

1. **비즈니스 가치 중심**: 기술보다 도메인 지식과 비즈니스 가치에 우선순위
2. **지속적인 도메인 전문가 참여**: 개발 전 과정에 걸쳐 도메인 전문가와 협업
3. **유비쿼터스 언어**: 코드, 문서, 대화에서 일관된 용어 사용
4. **전략적 설계와 전술적 설계의 균형**: 큰 그림(바운디드 컨텍스트)과 세부 구현(도메인 모델) 모두 중요시

### DDD의 핵심 개념
- **bounded context**: 특정 도메인 모델이 적용되는 경계를 정의합니다.
- **ubiquitous language**: 도메인 전문가와 개발자가 공유하는 공통 언어입니다.
- **aggregates**: 도메인 객체의 클러스터로, 하나의 단위로 취급됩니다.
- **entity**: 고유한 식별자를 가지고 수명 주기 동안 연속성을 유지하는 객체입니다.
- **value object**: 속성만으로 정의되는 불변 객체입니다.
- **domain event**: 도메인에서 발생한 중요한 사건을 나타냅니다.
- **domain service**: 특정 엔티티나 값 객체에 속하지 않는 도메인 로직을 수행합니다.

## Directory Structure Diagram
```
ddd-project
├── src
│   ├── domain
│   │   ├── aggregates
│   │   ├── events
│   │   ├── services
│   │   └── valueObjects
│   ├── application
│   │   ├── commands
│   │   ├── queries
│   │   └── services
│   ├── infrastructure
│   │   ├── config
│   │   ├── persistence
│   │   └── services
│   └── interfaces
│       ├── api
│       └── dtos
├── tests
├── package.json
├── tsconfig.json
└── README.md
```

## 디렉토리 구조 설명
- **src**: 애플리케이션의 주요 소스 코드가 계층별로 구성되어 있습니다.
  - **domain**: 핵심 비즈니스 로직이 포함된 도메인 계층입니다.
    - **aggregates**: 비즈니스 로직과 상태를 캡슐화하는 애그리게이트 루트가 있습니다.
    - **events**: 도메인의 상태 변화를 나타내는 도메인 이벤트가 포함됩니다.
    - **services**: 특정 애그리게이트에 연결되지 않은 비즈니스 로직을 캡슐화하는 도메인 서비스가 있습니다.
    - **valueObjects**: 도메인의 설명적 측면을 나타내는 값 객체가 포함됩니다.
  - **application**: 명령, 쿼리 및 애플리케이션 서비스를 포함한 애플리케이션 로직이 있습니다.
    - **commands**: 명령 정의와 해당 핸들러가 포함됩니다.
    - **queries**: 데이터 검색을 위한 쿼리 정의가 포함됩니다.
    - **services**: 도메인과 인프라 계층 간의 조정을 담당하는 애플리케이션 서비스가 있습니다.
  - **infrastructure**: 구성, 영속성 및 외부 서비스 통합과 같은 구현 세부 사항이 포함됩니다.
    - **config**: 애플리케이션의 구성 설정이 포함됩니다.
    - **persistence**: 데이터 영속성을 위한 리포지토리 구현이 있습니다.
    - **services**: 외부 서비스를 위한 어댑터가 포함됩니다.
  - **interfaces**: API 컨트롤러, 라우트 및 데이터 전송 객체(DTO)가 포함됩니다.
    - **api**: 애플리케이션의 HTTP 컨트롤러와 라우트가 있습니다.
    - **dtos**: 계층 간 데이터 전송을 위한 데이터 전송 객체가 포함됩니다.
- **tests**: 코드 품질과 정확성을 보장하기 위한 계층별 단위 테스트가 포함됩니다.
- **package.json**: 프로젝트의 의존성과 스크립트를 관리하는 파일입니다.
- **tsconfig.json**: TypeScript 컴파일러 옵션을 구성하고 컴파일에 포함할 파일을 지정합니다.
- **README.md**: 프로젝트 개요와 디렉토리 구조 및 목적에 대한 설명이 포함된 프로젝트 문서입니다.

## DDD 적용의 이점
1. **비즈니스 복잡성 관리**: 복잡한 비즈니스 로직을 명확하게 구조화하여 관리합니다.
2. **도메인 전문가와의 협업**: 유비쿼터스 언어를 통해 개발자와 도메인 전문가 간의 의사소통을 개선합니다.
3. **유지보수성**: 도메인 변화에 빠르게 적응할 수 있는 유연한 구조를 제공합니다.
4. **테스트 용이성**: 계층화된 아키텍처로 인해 각 구성 요소를 독립적으로 테스트하기 쉽습니다.
5. **확장성**: 명확한 경계를 가진 모듈 구조로 시스템을 확장하기 용이합니다.